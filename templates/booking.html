<!-- File: `templates/booking.html` -->
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{% block title %}Бронирование - Paddle Booking{% endblock %}</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* неделя */
    .week-controls { display:flex; align-items:center; gap:12px; margin-bottom:16px; }
    .week-arrow { width:36px;height:36px;border-radius:8px;border:1px solid #e6e6e6;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer; }
    .week-nav { display:flex; gap:10px; align-items:center; }
    .week-day { display:flex; flex-direction:column; align-items:center; gap:4px; width:56px; min-width:56px; cursor:pointer; }
    .week-day .weekday { font-size:12px; color:#9aa0a6; text-transform:capitalize; }
    .week-day .daynum { width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:50%; font-weight:700; color:#333; background:transparent; border:1px solid transparent; }
    .week-day:hover .daynum { transform: translateY(-3px); transition: .12s; }
    .week-day.selected .daynum { background:var(--primary-color,#4CAF50); color:#fff; }
    /* прочее (корты/слоты) */
    .courts-list { display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); margin-top:6px; }
    .court-item { padding:10px;border:1px solid #ececec;border-radius:8px;background:#fff;cursor:pointer; }
    .court-item.active { border-color:var(--primary-color,#2b8aef); box-shadow:0 6px 18px rgba(43,138,239,0.06); }
    .time-slots { margin-top:8px; padding:8px; background:#fff;border:1px solid #eee;border-radius:8px; min-height:120px; }
    .time-slot { display:flex; justify-content:space-between; padding:8px;border-bottom:1px solid #f6f6f6; }
    .time-slot.available { cursor:pointer; background:#f8fff8; }
    .loading,.error-message,.select-court-date { padding:14px; text-align:center; color:#666; }
  </style>
</head>
<body class="{% if user.is_authenticated %}user-authenticated{% endif %}">
  {% include 'partials/navbar.html' %}

  <main class="container" style="max-width:1100px;margin:20px auto;padding:0 12px;">
    <h1 style="margin:0;color:var(--primary-color,#2b8aef)">Бронирование кортов</h1>

    <section style="margin-top:18px;">
      <h3 style="margin:12px 0 8px">Выберите дату</h3>
      <div class="week-controls" aria-label="Выбор недели">
        <button id="prev-week" class="week-arrow" type="button" aria-label="Предыдущая неделя"><i class="fas fa-chevron-left"></i></button>
        <div id="week-nav" class="week-nav" role="tablist" aria-label="Неделя"></div>
        <button id="next-week" class="week-arrow" type="button" aria-label="Следующая неделя"><i class="fas fa-chevron-right"></i></button>
      </div>

      <h3 style="margin:18px 0 8px">Корт</h3>
      <div id="courts-list" class="courts-list">
        {% if courts %}
          {% for court in courts %}
            <div class="court-item" data-court-id="{{ court.id }}" data-court-price="{{ court.price|default:0 }}">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <h4 style="margin:0;font-size:16px">{{ court.name }}</h4>
                <div style="color:#666">{{ court.price|default:0 }} ₽/ч</div>
              </div>
              <div style="color:#777;font-size:13px;margin-top:6px">{{ court.description|default:"" }}</div>
            </div>
          {% endfor %}
        {% endif %}
        <div class="no-courts" style="padding:12px;color:#666">Нет доступных кортов</div>
      </div>

      <h3 style="margin:18px 0 8px">Доступное время</h3>
      <div id="time-slots" class="time-slots">
        <div class="select-court-date">Выберите дату и корт, чтобы увидеть время</div>
      </div>
    </section>
  </main>

  {% block extra_js %}
    <script src="{% static 'js/booking.js' %}"></script>
  {% endblock %}
</body>
</html>

